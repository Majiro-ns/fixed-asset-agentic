%%{init: {'theme': 'dark', 'themeVariables': {'primaryColor': '#F59E0B', 'primaryTextColor': '#FFFFFF', 'primaryBorderColor': '#D97706', 'lineColor': '#9CA3AF', 'secondaryColor': '#1F2937', 'tertiaryColor': '#111827', 'fontSize': '20px', 'fontFamily': 'Noto Sans JP, sans-serif', 'nodeTextColor': '#FFFFFF'}}}%%
graph TB
    User["ğŸ§‘ ãƒ¦ãƒ¼ã‚¶ãƒ¼"] -->|è¦‹ç©æ›¸PDF| UI["UI<br/>Cloud Run<br/>Streamlit"]
    UI -->|POST /classify_pdf| API["API<br/>Cloud Run<br/>FastAPI"]
    API -->|PDFè§£æ| Flash["Gemini 2.0 Flash<br/>Vision"]
    Flash -->|æŠ½å‡ºçµæœ| API
    API -->|å…¨æ˜ç´°ä¸€æ‹¬| Pro["Gemini 3 Pro<br/>thinking=HIGH"]
    Pro -->|3å€¤åˆ¤å®š| API
    API -->|GUIDANCEæ™‚| VS["Vertex AI Search"]
    VS -->|æ³•ä»¤ã‚¨ãƒ“ãƒ‡ãƒ³ã‚¹| API
    API -->|ãƒ¦ãƒ¼ã‚¶ãƒ¼å›ç­”| Pro
    Pro -->|å†åˆ¤å®š| API
    API -->|diffè¡¨ç¤º| UI

    style User fill:#6B7280,stroke:#9CA3AF,color:#fff
    style UI fill:#34a853,stroke:#137333,color:#fff
    style API fill:#4285f4,stroke:#1a73e8,color:#fff
    style Flash fill:#ea4335,stroke:#c5221f,color:#fff
    style Pro fill:#ea4335,stroke:#c5221f,color:#fff
    style VS fill:#fbbc04,stroke:#f9ab00,color:#000
