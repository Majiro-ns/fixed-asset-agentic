# FAQ（想定質問と回答）およびリスク対策

> **Version**: 1.0.0
> **Last Updated**: 2026-01-30
> **対象**: 第4回 Agentic AI Hackathon with Google Cloud 提出物

---

## 1. 技術的なFAQ

### Q1-1: このシステムはどのように動作しますか？

**A**: 本システムは以下の3ステップで見積書の固定資産/費用判定を行います。

1. **Step1 - Opal抽出**: 見積書PDFからOpal（OCR）で項目を抽出し、JSONに変換
2. **Step2 - Adapter正規化**: 抽出結果を凍結スキーマ（v1.0）に正規化し、後段の処理を安定化
3. **Step3 - Classifier判定**: 各明細行を3値（CAPITAL_LIKE/EXPENSE_LIKE/GUIDANCE）で判定

**特徴**: 判断が割れる場合は自動判定を停止し（Stop-first設計）、人間の確認を促す「GUIDANCE」を返します。

---

### Q1-2: なぜGoogle Cloud AIを選択したのですか？

**A**: 以下の理由からGoogle Cloud AIを採用しました。

| 製品 | 選択理由 |
|------|----------|
| **Document AI** | 高精度なPDF抽出。日本語帳票に対応。PyMuPDF/pdfplumberへのフォールバック設計で可用性を確保 |
| **Vertex AI Search** | 法令・税務ルールの検索に最適。GUIDANCEの根拠を法令エビデンスで補強可能 |
| **Cloud Run** | サーバーレスで運用負荷が低い。スケーラビリティとコスト最適化を両立 |

---

### Q1-3: Stop-first設計とは何ですか？

**A**: 「迷ったら止まる」という設計思想です。

- **従来のAI**: すべてを自動判定しようとする → 誤判定リスク
- **本システム**: 判断が割れる場合は「GUIDANCE」として停止 → 人間が確認

**Stop条件の例**:
- 撤去・移設・既設など、判断が分かれるキーワードを検知
- 金額が閾値を超える場合（ポリシーで設定可能）
- 情報が不足している場合

---

### Q1-4: どのような技術スタックを使用していますか？

**A**: 以下の技術スタックを使用しています。

**バックエンド**:
- FastAPI（Python）: REST API
- Cloud Run: サーバーレスデプロイ
- Document AI / Vertex AI Search: Google Cloud AI

**フロントエンド**:
- Streamlit: デモ用Web UI

**開発・テスト**:
- pytest: テストフレームワーク
- GitHub Actions: CI/CD

---

### Q1-5: APIの主要エンドポイントは何ですか？

**A**: 以下のエンドポイントを提供しています。

| エンドポイント | 説明 |
|---------------|------|
| `GET /health` | ヘルスチェック |
| `POST /classify` | Opal JSONを送信して固定資産判定を実行 |
| `POST /classify_pdf` | PDFファイルを直接アップロードして判定（Feature-Flagged） |

---

## 2. ビジネス的なFAQ

### Q2-1: 誰がこのシステムを使いますか？

**A**: 主なターゲットユーザーは以下の通りです。

| ユーザー層 | 利用シーン |
|-----------|----------|
| **経理担当者** | 月末・決算期の固定資産判定業務。GUIDANCE行のみを優先確認 |
| **税務担当者** | 固定資産/費用の判断根拠の確認。エビデンス付きで監査対応 |
| **管理職** | 判定結果のレビュー。Stop設計により重要案件を漏れなく把握 |
| **監査法人** | 判定プロセスの検証。traceとevidenceで追跡可能 |

---

### Q2-2: どのようなビジネス課題を解決しますか？

**A**: 以下の課題を解決します。

1. **判断の属人化**: 担当者によって判断が異なる → 統一ルールとエビデンスで標準化
2. **時間的制約**: 月末・決算期に確認時間がない → GUIDANCE行のみ優先確認で効率化
3. **監査対応**: 「なぜその処理にしたか」を説明できない → trace/evidenceで追跡可能
4. **誤判定リスク**: AIが断定して誤る → Stop-first設計で人間が最終判断

---

### Q2-3: 収益化のモデルはどう考えていますか？

**A**: 以下のビジネスモデルが想定されます。

| モデル | 説明 |
|-------|------|
| **SaaS提供** | 月額/従量課金でCloud Runサービスを提供 |
| **オンプレミス導入** | 大企業向けにカスタマイズ導入 |
| **OEM提供** | 会計ソフトベンダーへのAPI/SDKライセンス |
| **コンサルティング** | 導入支援・ポリシーカスタマイズ |

---

### Q2-4: 競合他社との差別化ポイントは何ですか？

**A**: 主な差別化ポイントは以下の通りです。

1. **Stop-first設計**: 他社は「全自動」を訴求。本システムは「迷ったら止まる」を価値とする
2. **エビデンス付き判定**: 判定根拠を明示し、監査対応に耐える
3. **ポリシーカスタマイズ**: 会社ごとのルールを追加可能（安全性は維持）
4. **Google Cloud AI統合**: Document AI/Vertex AI Searchで高精度・法令検索を実現

---

## 3. セキュリティ・プライバシーFAQ

### Q3-1: 顧客データはどのように扱われますか？

**A**: 以下のセキュリティポリシーを適用しています。

| 項目 | 対応 |
|------|------|
| **データ保持** | 判定結果のみ保持。元PDFは処理後に削除可能（設計上保持しない） |
| **暗号化** | Cloud Runの標準TLS暗号化。データは転送中・保存中ともに暗号化 |
| **アクセス制御** | Cloud IAMで認証・認可を管理。`--allow-unauthenticated`は開発/デモ用 |
| **ログ管理** | Cloud Loggingで監査ログを保持。個人情報はマスキング推奨 |

---

### Q3-2: 個人情報は処理されますか？

**A**: 本システムは見積書の「項目名」「金額」「数量」のみを処理します。

- **処理対象**: 品目名、金額、数量、ベンダー名、日付
- **処理対象外**: 個人名、住所、電話番号、マイナンバー等

**注意**: 実運用時は、個人情報を含む見積書をアップロードしないよう運用ルールを定めてください。

---

### Q3-3: デモデータに実在の企業情報は含まれますか？

**A**: いいえ。すべてのデモデータ（`data/demo/`、`data/golden/`）は架空データです。

- 実在の企業名、請求書番号、見積書番号は一切含まれていません
- ハッカソン提出用に作成された架空のサンプルデータです

---

## 4. 精度・信頼性FAQ

### Q4-1: 判定精度はどの程度ですか？

**A**: ゴールデンセット評価で**100%**の精度を達成しています。

| 指標 | 値 |
|------|-----|
| Golden Set Accuracy | 100.0%（10/10 cases） |
| 最終評価日 | 2026-01-20 |

**補足**: Stop-first設計により、判断が割れるケースはGUIDANCEとして人間に委ねます。これにより「誤判定」ではなく「要確認」として処理され、精度の維持に寄与しています。

---

### Q4-2: GUIDANCEが多すぎると業務効率が落ちませんか？

**A**: ポリシーファイルでGUIDANCE条件を調整できます。

- **デフォルト**: 安全寄りの設定（GUIDANCEが多め）
- **カスタマイズ**: `policies/company_default.json`でキーワード・閾値を調整
- **学習**: 過去のGUIDANCE判断を蓄積し、適切なルールを追加可能

---

### Q4-3: システム障害時のフォールバックはありますか？

**A**: 以下のフォールバック設計を実装しています。

| 障害 | フォールバック |
|------|--------------|
| Document AI障害 | PyMuPDF/pdfplumberでPDF抽出（`USE_DOCAI`未設定時） |
| Vertex AI Search障害 | citations無しで処理続行（core判定に影響なし） |
| ポリシーファイル破損 | デフォルトポリシー（空ポリシー）で安全に続行 |
| API全体障害 | Cloud Runの自動リトライ・スケーリング |

---

## 5. リスク分析と対策

### 5.1 技術的リスク

| リスク | 影響度 | 発生確率 | 対策 |
|--------|--------|----------|------|
| **OCR精度の限界** | 中 | 中 | Document AI採用。フォールバックでPyMuPDF/pdfplumber使用 |
| **スキーマ変更による互換性問題** | 高 | 低 | スキーマv1.0を凍結。変更時は新バージョンとして管理 |
| **Google Cloud障害** | 高 | 低 | フォールバック設計。core判定はローカルで動作可能 |
| **依存ライブラリの脆弱性** | 中 | 中 | dependabot/renovateで自動更新。メジャーバージョンは承認制 |
| **パフォーマンス劣化** | 中 | 低 | Cloud Runの自動スケーリング。負荷テストで検証 |

---

### 5.2 運用リスク

| リスク | 影響度 | 発生確率 | 対策 |
|--------|--------|----------|------|
| **GUIDANCE過多による業務負荷増大** | 中 | 中 | ポリシーファイルで閾値調整。運用実績に基づき最適化 |
| **担当者のスキル不足** | 中 | 中 | ドキュメント整備（DEMO.md等）。トレーニング実施 |
| **ポリシー設定ミス** | 高 | 中 | ポリシーは追加のみ可（安全性を緩和不可）。デフォルトは安全寄り |
| **監査対応の不備** | 高 | 低 | trace/evidenceで判定根拠を保持。ログ保持ポリシーを明確化 |
| **Cloud Runコスト超過** | 中 | 中 | 予算アラート設定。コールドスタート対策で効率化 |

---

### 5.3 法的リスク

| リスク | 影響度 | 発生確率 | 対策 |
|--------|--------|----------|------|
| **税務判断の誤り** | 高 | 中 | AIは判断支援のみ。最終判断は人間が行うStop-first設計 |
| **個人情報漏洩** | 高 | 低 | 見積書の項目名・金額のみ処理。個人情報は処理対象外 |
| **OSSライセンス違反** | 中 | 低 | README.mdにライセンス表記。PyMuPDF(AGPL-3.0)は商用時要注意 |
| **第三者権利侵害** | 高 | 低 | デモデータは全て架空。実在企業情報を含めない運用ルール |
| **AI判定への過信による監査指摘** | 高 | 中 | GUIDANCE設計で人間確認を強制。エビデンス付きで根拠を明示 |

---

### 5.4 リスク対策サマリ

```
┌─────────────────────────────────────────────────────────────┐
│                    リスク対策の3本柱                         │
├─────────────────────────────────────────────────────────────┤
│ 1. Stop-first設計                                           │
│    → 判断が割れるケースは自動化を止め、人間に委ねる         │
│                                                             │
│ 2. フォールバック設計                                       │
│    → 外部サービス障害時もcore判定は継続可能                 │
│                                                             │
│ 3. 監査対応設計                                             │
│    → trace/evidenceで判定根拠を追跡可能                     │
└─────────────────────────────────────────────────────────────┘
```

---

## 6. 付録：想定される追加質問

### 審査員からの質問想定

| 質問 | 回答ポイント |
|------|------------|
| 「AIが判断を停止することに価値があるのか？」 | 誤った自動化は信頼を損なう。止まることで人間が確認でき、監査対応も可能になる |
| 「Google Cloud AIをどこで使っているか？」 | Document AI(PDF抽出)、Vertex AI Search(法令検索)、Cloud Run(デプロイ) |
| 「実運用時のスケーラビリティは？」 | Cloud Runの自動スケーリング。ステートレス設計で水平拡張可能 |
| 「競合との違いは？」 | 「全自動」ではなく「止まる設計」。エビデンス付きで監査対応可能 |

---

## 更新履歴

| 日付 | 版 | 内容 |
|------|-----|------|
| 2026-01-30 | 1.0.0 | 初版作成 |
